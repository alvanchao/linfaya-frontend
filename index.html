<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LINFAYA COUTURE｜服飾・配件・舞鞋</title>
  <meta name="description" content="舒適實穿的服飾、配件與舞鞋，快速出貨與貼心服務。" />
  <style>
    :root{
      --bg:#0b0c10;--panel:#111319;--panel-2:#161a22;
      --muted:#8a94a7;--pri:#5eead4;--text:#e6e9ef;--accent:#a78bfa;--danger:#f87171
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(180deg,#0b0c10,#0e1117);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans","PingFang TC","Hiragino Sans",sans-serif}
    a{color:inherit;text-decoration:none}
    .container{max-width:1080px;margin:0 auto;padding:16px}
    header.site{position:sticky;top:0;z-index:20;background:rgba(11,12,16,.6);backdrop-filter:blur(8px);border-bottom:1px solid #1f2430}
    .brand{font-weight:700;letter-spacing:.2em;display:flex;align-items:center;gap:10px}
    .brand img.logo{height:24px;width:auto;display:block}
    .muted{color:var(--muted)}
    .btn{background:var(--panel-2);border:1px solid #222834;color:var(--text);padding:8px 12px;border-radius:12px;cursor:pointer}
    .btn.small{padding:4px 8px;border-radius:8px;font-size:12px}
    .btn.pri{background:var(--pri);border-color:transparent;color:#0b0c10;font-weight:700}
    .link-danger{background:transparent;border:none;color:var(--danger);cursor:pointer}
    .badge{display:inline-flex;min-width:20px;height:20px;align-items:center;justify-content:center;background:var(--accent);color:#0b0c10;border-radius:999px;padding:0 6px;font-size:12px;font-weight:700;margin-left:6px}

    main .toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:12px 0}

    /* 分類分頁 */
    #cats{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 14px}
    .tab{padding:6px 10px;border-radius:999px;border:1px solid #2a3142;background:#0e1117;color:var(--text);cursor:pointer}
    .tab.active{border-color:var(--pri);box-shadow:0 0 0 1px rgba(94,234,212,.2) inset}

    /* 商品清單 */
    #grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:900px){#grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){#grid{grid-template-columns:1fr}}
    .product{background:var(--panel);border:1px solid #1d2230;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .imgbox{background:#0f1218}
    .main-img{aspect-ratio:4/3;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .main-img img{width:100%;height:100%;object-fit:cover}
    .thumbs{display:flex;gap:6px;padding:8px;border-top:1px solid #171b25}
    .thumbs img{width:52px;height:52px;object-fit:cover;border:1px solid #222a3a;border-radius:8px;opacity:.7;cursor:pointer}
    .thumbs img.active{opacity:1;border-color:var(--pri)}
    .body{padding:12px;display:flex;flex-direction:column;gap:8px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid #2a3142;background:#0e1117;color:var(--text);cursor:pointer}
    .chip.active{border-color:var(--pri);box-shadow:0 0 0 1px rgba(94,234,212,.2) inset}
    .chip.small{padding:4px 8px;font-size:12px}
    .chip.disabled{opacity:.4;pointer-events:none}

    /* 分頁器 */
    #pager{display:flex;gap:8px;justify-content:center;margin:16px 0}
    .page-btn{background:transparent;border:1px solid #2a3142;color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer}
    .page-btn.active{border-color:var(--pri)}

    /* Drawer（購物車） */
    .drawer{position:fixed;right:-420px;top:0;width:420px;max-width:100vw;height:100vh;background:var(--panel);border-left:1px solid #1e2431;transition:right .25s ease;z-index:30;display:flex;flex-direction:column}
    .drawer.open{right:0}
    .drawer header{border-bottom:1px solid #1e2431}
    .drawer .list{padding:12px;flex:1;overflow:auto}
    .drawer .summary{border-top:1px solid #1e2431;padding:12px;background:#0e1117}
    .cart-card{display:grid;grid-template-columns:72px 1fr auto;gap:10px;padding:10px;border:1px solid #1b2130;border-radius:12px;background:#0f131a;margin-bottom:10px}
    .cart-attr{font-size:12px;color:var(--muted);margin:4px 0 6px}
    .cart-actions{display:flex;align-items:center;gap:8px}
    .cart-right{align-self:center;font-weight:700}
    .row{display:flex;align-items:center;justify-content:space-between;margin:6px 0}
    .row.total{font-size:18px;font-weight:800}
    .form{display:grid;grid-template-columns:1fr;gap:10px;margin-top:10px}
    .field label{display:block;margin-bottom:6px;font-size:14px;color:var(--muted)}
    .input{width:100%;padding:10px;border-radius:10px;border:1px solid #283144;background:#0b0f16;color:var(--text)}
    .qty{display:flex;gap:12px;flex-wrap:wrap}
    .empty{padding:20px;text-align:center;color:var(--muted)}

    /* Toast */
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;z-index:40;background:#111827;border:1px solid #243044;color:#e5e7eb;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .2s, transform .2s}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}
  </style>
</head>
<body>
  <!-- 頁首 -->
  <header class="site">
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <div class="brand">
        <img class="logo" src="Photo/Linfaya_logo.JPEG" alt="LOGO" onerror="this.style.display='none'">
        <span>LINFAYA COUTURE</span>
      </div>
      <div>
        <button id="openCart" class="btn">購物車 <span id="cartCount" class="badge">0</span></button>
      </div>
    </div>
  </header>

  <!-- 主內容 -->
  <main class="container">
    <div class="toolbar">
      <div class="muted">精選商品</div>
      <div id="infoText" class="muted">共 0 件</div>
    </div>

    <!-- ※ 重要：不再放 #preorderPanel，避免和 utils-and-ui.js 的小提醒重複 -->

    <!-- 分類分頁 -->
    <div id="cats"></div>

    <!-- 商品清單 -->
    <div id="grid"></div>

    <!-- 單一分頁器 -->
    <div id="pager"></div>
  </main>

  <!-- === Cart Drawer（購物車抽屜）=== -->
  <aside id="drawer" class="drawer">
    <header class="container" style="display:flex;align-items:center;justify-content:space-between">
      <div class="brand"><b>購物車</b></div>
      <button id="closeCart" class="btn">關閉</button>
    </header>

    <div class="list" id="cartList"></div>

    <div class="summary">
      <div class="row"><span>小計</span><b id="subtotal">NT$0</b></div>
      <div class="row"><span>運費</span><b id="shipping">NT$0</b></div>
      <div class="row total"><span>合計</span><b id="grand">NT$0</b></div>

      <div class="form">
        <div class="field"><label>收件姓名</label><input id="name" class="input" placeholder="王小明" /></div>
        <div class="field"><label>Email</label><input id="email" class="input" placeholder="you@example.com" /></div>
        <div class="field"><label>手機</label><input id="phone" class="input" placeholder="0912xxxxxx" /></div>

        <div class="field">
          <label>配送方式</label>
          <div class="qty">
            <label><input type="radio" name="ship" value="home" checked /> 自家宅配</label>
            <label><input type="radio" name="ship" value="family" /> 全家店到店</label>
            <label><input type="radio" name="ship" value="seven" /> 7-11 店到店</label>
          </div>
        </div>

        <div id="homeFields" class="field"><label>宅配地址</label><input id="addr" class="input" placeholder="地址" /></div>
        <div id="familyFields" class="field" style="display:none"><button type="button" id="btnPickFamily" class="btn">選擇全家門市</button><div id="familyPicked" class="muted">尚未選擇</div></div>
        <div id="sevenFields" class="field" style="display:none"><button type="button" id="btnPickSeven" class="btn">選擇 7-11 門市</button><div id="sevenPicked" class="muted">尚未選擇</div></div>

        <div class="field" id="preorderField"><label><input type="checkbox" id="agreePreorder" /> 我已了解此為預購，願意等待出貨。</label></div>
      </div>

      <button id="checkout" class="btn pri">前往付款</button>
    </div>
  </aside>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- Scripts：順序很重要 -->
  <script src="config-and-data.js"></script>
  <script src="utils-and-ui.js"></script>
  <script src="shop-core.js"></script>
  <script src="checkout-and-shipping.js"></script>
</body>
</html>
